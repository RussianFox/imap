Интерактивная карта для Zabbix

Сайт с инструкциями и последними версиями http://zabbiximap.lisss.ru/

Данное дополнение не вносит никаких изменений в исходные файлы и конфигурацию системы, только дополняя ее функционал.
Все изменения вы должны вносить сами на свой страх и риск.

Для установки скопируйте все файлы (файл imap.php, папка imap и папка locale) в папку с файлами Zabbix (/usr/share/zabbix для дефолтных настроек Debian)
Далее надо поправить  файл include/menu.inc.php
Пример встраивания (первая и последняя части - оригинальные, в центре добавленный текст):

array(
	'url' => 'srv_status.php',
	'label' => _('IT services'),
	'force_disable_all_nodes' => true,
	'sub_pages' => array('report3.php', 'chart5.php')
),
array(
	'url'=>'imap.php',
	'label'=>_('Interactive map')
),
array(
	'url' => 'chart3.php'
),


Теперь основной функционал работоспособен. Зайдите в ваш Zabbix и вы увидите новый пункт меню.


Для дополнительных настроек найдите в папке imap файл settings.js.template, переименуйте в settings.js и поменяйте настройки по своему вкусу.


Для получения ключа API для Bing вам надо получить учетную запись Microsoft и создать новый ключ. Подробности тут http://msdn.microsoft.com/ru-ru/library/ff428642.aspx


Для того, чтобы работали иконки оборудования, вам надо набросать в папку imap/hardware картинок в формате png. Названием будет тип оборудования (modem.png, server.png).
Не забудьте дать права на чтение этих файлов веб-сервером. Не удаляйте и не заменяйте файл none.png


Для работы связей между хостами нам нужно добавить две таблицы в базу данных Zabbix.

В папке imap лежит файл tables.sql
Вы можете открыть phpmyadmin, выбрать базу данных Zabbix, и выбрать этот файл в разделе Import

Второй способ для любителей командной строки:
mysql -u user -p zabbixbd < /usr/share/zabbix/imap/tables.sql
Замените zabbixbd на название таблицы с данными zabbix, user на имя пользователя с правами добавления таблиц в базу и введите пароль.